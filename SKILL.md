---
name: github-dev-flow
description: GitHub Issue の起票からブランチ作成、PR 作成までの一連の開発ライフサイクルを管理する
---

# GitHub 開発フロー・スキル (github-dev-flow)

## 概要
このスキルは、プロジェクトにおける標準的な開発サイクルを効率化し、一貫性を保つための手順を定義します。
Issue の起票、作業ブランチの作成、実装、コミット、そしてプルリクエスト（PR）の作成までをサポートします。
進捗管理としてプロジェクト内の **`docs/progress/task.md`** を使用し、常に「現在のタスク」の状態を反映させます。
これにより、**セッションを中断しても次回開始時に続きから再開可能**です。

## 手順

### 1. Issue の起票 (Issue Creation)
タスクが発生したら、まず `gh issue create` を使用して Issue を起票します。
- タイトルは内容がわかる簡潔なものにする。
- 本文には `examples/issue_template.md` を使用し、目的と進捗管理用のタスクリストを含める。
- 作成された Issue 番号を取得して記録する。

### 2. ブランチの作成と紐付け (Branching & Linking)
`gh issue develop` コマンドを使用して、Issue に紐付いた作業用ブランチを作成します。
- コマンド例: `gh issue develop <Issue番号> --name "<short-description>" --base main --checkout`
- `--base main` を指定することで、確実に `main` ブランチから派生させます（省略時はリポジトリのデフォルトブランチになります）。
- これにより、GitHub 上で Issue とブランチが明示的に紐付き、進捗状況が管理しやすくなります。
- ブランチ名は `xxx-short-description` の形式を推奨します。

### 3. 実装と進捗管理 (Implementation & Tracking)
- `examples/task_template.md` を参考に **`docs/progress/task.md`** を更新し、現在のタスクを管理する。
  - **運用方針**: `task.md` は常に「現在進行中のタスク」を記述します。新しいタスクを開始する際は内容を上書きしますが、**`task.md` はブランチごとに管理される**ため、ブランチを切り替える（作業を中断して別のIssueに移る）際は、必ずその時点の状態をコミットするかスタッシュしてください。これにより、ブランチを戻した際に進捗状況も自動的に復元されます。
  - 過去のタスク履歴は Git のコミットログやクローズされた Issue/PR から参照可能です。
- 作業の進捗に合わせて、GitHub 上の **Issue のチェックボックスを随時更新**する。
  - `gh issue edit <Issue番号> --body-file <更新後の本文>` を使用するか、ブラウザで更新する。
- 修正が完了したら、適切なツール（lint, test等）で品質を確認する。

### 4. コミットとプッシュ (Commit & Push)
- 変更内容をステージングする。
- コミットメッセージには必ず Issue 番号を含める。
  - 例: `feat: ログイン機能の実装 (Issue #123)`
- リモートブランチへプッシュする。

### 5. プルリクエストの作成 (PR Creation)
`gh pr create` を使用して PR を作成します。
- **作成前の確認事項**:
  - 対応する **Issue のタスクがすべて完了（チェック済み）**になっていることを確認する。
  - PR 本文のチェックリストも、作成時に**すべて完了状態**で作成する。
  - **`docs/progress/task.md` の削除**: `main` ブランチをクリーンに保ち、他の並行作業との衝突（マージコンフリクト）を避けるため、PR 作成用の最後のコミット、または PR 作成直前に `task.md` を削除します。完了の証跡は GitHub の Issue と PR 本文に残ります。
- タイトルに Issue ID を含める。
- 本文には `examples/pr_template.md` を使用し、`Fixes #xxx` を含めて Issue と紐付ける。
- 実装内容と検証結果を簡潔に記載する。

## 成功の定義
- Issue と PR が正しく紐付いている。
- **すべてのタスク（Issue/PR）がチェック済み**で、完了状態が反映されている。
- 作業ブランチが規約通りの名前になっている。
- PR のマージにより Issue が自動的にクローズされる状態になっている。
